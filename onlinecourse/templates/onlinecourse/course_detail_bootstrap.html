{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{ course.name }}</title>

    <!-- Bootstrap CSS -->
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.4/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
</head>

<body>
<div class="container mt-4">

    <!-- ================= COURSE DETAILS ================= -->
    <h2 class="mb-3">{{ course.name }}</h2>

    <img src="{{ course.image.url }}" class="img-fluid mb-3" alt="Course Image">

    <p>{{ course.description }}</p>

    <!-- ================= LESSONS ================= -->
    <h4 class="mt-4">Lessons</h4>
    <ul class="list-group mb-4">
        {% for lesson in course.lesson_set.all %}
            <li class="list-group-item">
                <strong>{{ lesson.title }}</strong>
            </li>
        {% endfor %}
    </ul>

    <!-- ================= EXAM SECTION ================= -->
    {% if user.is_authenticated %}
    <br>

    <button class="btn btn-primary btn-block"
            data-toggle="collapse"
            data-target="#exam">
        Start Exam
    </button>

    <div id="exam" class="collapse mt-3">
        <form id="questionform"
              action="{% url 'onlinecourse:submit' course.id %}"
              method="POST">

            {% csrf_token %}

            {% for question in course.question_set.all %}
            <div class="card mt-3">
                <div class="card-header">
                    <h5>{{ question.question_text }}</h5>
                </div>

                <div class="card-body">
                    {% for choice in question.choice_set.all %}
                    <div class="form-check">
                        <label class="form-check-label">
                            <input type="checkbox"
                                   class="form-check-input"
                                   name="choice_{{ choice.id }}"
                                   value="{{ choice.id }}">
                            {{ choice.choice_text }}
                        </label>
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% endfor %}

            <input type="submit"
                   class="btn btn-success btn-block mt-4"
                   value="Submit Exam">
        </form>
    </div>
    {% endif %}

</div>
</body>
</html>
